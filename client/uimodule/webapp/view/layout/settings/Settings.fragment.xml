<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core">
	<VBox class="sapUiSmallMargin">
		<f:Form
			id="general"
			editable="{= !!${user>/changeUser}}"
			busy="{user>/changingUser}"
		>
			<f:toolbar>
				<OverflowToolbar>
				<Title
					text="Usuario" 
				/>
				<ToolbarSpacer/>
					<Button
						icon="sap-icon://edit"
						text="Editar"
						press=".onEdit"
						visible="{= !${user>/changeUser}}"
					/>
				</OverflowToolbar>
			</f:toolbar>
			<f:layout>
				<f:ResponsiveGridLayout
					labelSpanXL="3"
					labelSpanL="3"
					labelSpanM="3"
					labelSpanS="12"
					adjustLabelSpan="false"
					emptySpanXL="4"
					emptySpanL="4"
					emptySpanM="4"
					emptySpanS="0"
					columnsXL="1"
					columnsL="1"
					columnsM="1"
					singleContainerFullSize="false" />
			</f:layout>
			<f:formContainers>
				<f:FormContainer
				>
					<f:formElements>
						<f:FormElement
							label="Nombre"
							visible="{= !${user>/changeUser}}"
						>
							<f:fields>
								<Text
									text="{user>/name}"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Nombre"
							visible="{= !!${user>/changeUser}}"
						>
							<f:fields>
								<Input
									id="nameInput"
									value="{user>/name}"
									liveChange=".onChangeInput"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Usuario"
							visible="{= !${user>/changeUser}}"
						>
							<f:fields>
								<Text
									text="{user>/username}"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Usuario"
							visible="{= !!${user>/changeUser}}"
						>
							<f:fields>
								<Input
									id="usernameInput"
									value="{user>/username}"
									liveChange=".onChangeInput"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Email"
							visible="{= !${user>/changeUser}}"
						>
							<f:fields>
								<Text
									text="{user>/email}"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Email"
							visible="{= !!${user>/changeUser}}"
						>
							<f:fields>
								<Input
									id="emailInput"
									value="{user>/email}"
									liveChange=".onChangeInput"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label=""
							visible="{= !!${user>/changeUser}}"
						>
							<f:fields>
								<HBox
									justifyContent="End"
								>
									<Button
										icon="sap-icon://decline"
										text="Cancelar"
										type="Reject"
										press=".onCancel"
										class="sapUiTinyMarginEnd"
									/>
									<Button
										icon="sap-icon://save"
										text="Guardar"
										press=".onSave"
									/>
								</HBox>
							</f:fields>
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
			</f:formContainers>
		</f:Form>
		<f:Form
			id="password"
			editable="true"
			busy="{user>/changingPassword}"
		>
			<f:toolbar>
				<OverflowToolbar>
				<Title
					text="Contraseña" 
				/>
				<ToolbarSpacer/>
				</OverflowToolbar>
			</f:toolbar>
			<f:layout>
				<f:ResponsiveGridLayout
					labelSpanXL="3"
					labelSpanL="3"
					labelSpanM="3"
					labelSpanS="12"
					adjustLabelSpan="false"
					emptySpanXL="4"
					emptySpanL="4"
					emptySpanM="4"
					emptySpanS="0"
					columnsXL="1"
					columnsL="1"
					columnsM="1"
					singleContainerFullSize="false" />
			</f:layout>
			<f:formContainers>
				<f:FormContainer
				>
					<f:formElements>
						<f:FormElement
							label="Contraseña actual"
						>
							<f:fields>
								<Input
									autocomplete="false"
									id="oldPasswordInput"
									type="Password"
									value="{user>/oldPassword}"
									liveChange=".onChangeInput"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Contraseña nueva"
						>
							<f:fields>
								<Input
									autocomplete="false"
									id="newPasswordInput"
									type="Password"
									value="{user>/newPassword}"
									liveChange=".onChangePassword"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label="Repetir Contraseña nueva"
						>
							<f:fields>
								<Input
									autocomplete="false"
									id="newPasswordRepeatInput"
									type="Password"
									value="{user>/newPasswordRepeat}"
									liveChange=".onChangePassword"
								/>
							</f:fields>
						</f:FormElement>
						<f:FormElement
							label=""
						>
							<f:fields>
								<HBox
									justifyContent="End"
								>
									<Button
										icon="sap-icon://decline"
										text="Cancelar"
										type="Reject"
										class="sapUiTinyMarginEnd"
										press=".onCancelChangePassword"
									/>
									<Button
										icon="sap-icon://accept"
										text="Cambiar Contraseña"
										press=".onSaveChangePassword"
									/>
								</HBox>
							</f:fields>
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
			</f:formContainers>
		</f:Form>
	</VBox>
</core:FragmentDefinition>